#!/usr/bin/env ruby

require 'thor'
require 'mushy'

class RailsCLI < Thor

  desc "start FILE", "Run this workflow file."
  def start file
    content = File.open(file).read
    puts content
  end

  desc "build FILE", 'Build a flow.'
  def build file

    RailsCLI.set_special 'build'

  end

  def self.set_special special
    @special = special
  end

  def self.get_special
    @special
  end

end

RailsCLI.start(ARGV)

exit unless RailsCLI.get_special

require 'sinatra'
enable :run

get '/' do
   File.read(File.join(File.dirname(__FILE__), 'public', 'index.html'))
end